{
  // `/api`로 시작하는 요청을 서버리스 함수로 라우팅
  "rewrites": [
    { "source": "/api/(.*)", "destination": "/api" }
  ],
  "builds": [
    // 클라이언트 앱 빌드 설정 (fabric-client)
    {
      "src": "fabric-client/package.json",
      "use": "@vercel/static-build",
      "config": { "outputDirectory": "build" }
    },
    // 서버리스 함수 빌드 설정 (fabric-server/api/index.js)
    {
      "src": "fabric-server/api/index.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    // `/api`로 시작하는 모든 요청을 fabric-server의 api/index.js로 라우팅
    {
      "src": "/api/(.*)",
      "dest": "fabric-server/api/index.js"
    },
    // 그 외 모든 요청 (정적 파일 요청)은 fabric-client의 빌드 결과물로 라우팅
    {
      "src": "/(.*)",
      "dest": "fabric-client/build/$1"
    }
  ]
}